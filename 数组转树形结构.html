<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const nodes =
[
    { id: 1, value: 5, parent: null },
    { id: 2, value: 15,parent: 1 },
    { id: 3, value: 25,parent: 1 },
    { id: 4, value: 35,parent: 3 },
    { id: 5, value: 55,parent: 2 },
    { id: 6, value: 75,parent: 5 },
    { id: 7, value: 85, parent: 5 }
];

//方法一
function arrayToTree(list){
    const result = []//结果
    const map = {}//存放list节点
    //1.遍历list,将list下的所有节点以id作为索引存入map
    for(const item of list){
        map[item.id] = {...item}//浅拷贝
    }
    //2.再次遍历，将根节点放入最外层，子节点放入父亲节点
    for(const item of list){
        //3.获取节点的id和父id
        const {id , parent} = item
        //如果是根节点，存入result
        if(item.parent === null){
            // console.log(map[id])
            result.push(map[id])
            // console.log(result)
        }else{
        //    console.log(map[parent].children)
            map[parent].children 
                ? map[parent].children.push(map[id]) 
                : (map[parent].children = [map[id]])
        }
    }
    return result
}
// arrayToTree(nodes)
//方法二
function arrayToTree2(list){
    const result = []//存放结果
    const map = {}
    for(const item of list){
        const { id, parent} = item
        //2.节点存入map
        if(!map[id]){
            map[id] = []aA
        }
        //3.根据id,将节点与之前存入的子节点合并
        map[id] = map[id].children ? {...item,chiidren:map[id]} : {...item}
        //是根节点
        if(parent === null){
            result.push(map[id])
        }else{
            if(!map[parent]) map[parent] = {}
            if(!map[parent].chiidren) map[parent].chiidren = []
            map[parent].chiidren.push(map[id])
        }
    }
    return result
}
console.log(arrayToTree2(nodes))

    </script>
</body>
</html>